import React, { useEffect, useRef } from 'react';
import '../Css/Transition.css';
import { gsap } from 'gsap';
import {useNavigate} from "react-router-dom";

function Transition() {
    const svgRef = useRef(null);
    const stekkorRef = useRef(null);
    const transportRef = useRef(null);
    const frameRef = useRef(null);
    const gRef = useRef(null);
    const containerRef = useRef(null);
    const headerRef = useRef(null);
    const anchorRef = useRef(null);
    const overlayRef = useRef(null);
    const mainRef = useRef(null);
    const navigate = useNavigate();

    useEffect(() => {
        const tl = gsap.timeline({ defaults: { ease: 'power4.out', duration: 0.7 },
            onComplete: () => navigate("/home")});

        gsap.set(mainRef.current, { autoAlpha: 0 });
        gsap.set(svgRef.current, { autoAlpha: 0 });
        gsap.set(gRef.current, { autoAlpha: 0 });

        tl.to(mainRef.current, { autoAlpha: 1, duration: 0.6})
          .to(svgRef.current, { autoAlpha: 1, duration: 0.4})
          .to(gRef.current, { autoAlpha: 1, duration: 0.4},"<0.2")
          .to(svgRef.current, {scale: 1.2, duration: 4}, "0");

        gsap.set(stekkorRef.current.querySelectorAll('.st1'), { opacity: 0, y: -30 });
        gsap.set(transportRef.current.querySelectorAll('.st1'), { opacity: 0, y: -30 });

        tl.fromTo(stekkorRef.current.querySelectorAll('.st1'), {
                opacity: 0, y: -50, skewY: 60, skewX: 30,},
            {opacity: 1, y: 0, skewY: 0, skewX: 0, stagger: 0.05, duration: 0.7
            }, "0.5");

        tl.fromTo(transportRef.current.querySelectorAll('.st1'), {
                opacity: 0, y: -50, skewY: 60, skewX: 30,},
            {opacity: 1, y: 0, skewY: 0, skewX: 0, stagger: 0.05, duration: 0.7
            }, "<0.6");

        tl.fromTo(
            anchorRef.current,
            { y: window.innerHeight, autoAlpha: 1 },
            { y: 0, duration: 2, ease: "power4.out"
            }, "-=2.4");

        tl.to(svgRef.current, { y: -window.innerHeight, duration: 2, ease: "power4.inOut" }, "-=1.2")
            .to(svgRef.current, { autoAlpha: 0, duration: 0.8 }, "-=0.6");

        tl.fromTo(overlayRef.current, { y: window.innerHeight },
            { y: 0, duration: 2, ease: "power4.inOut" }, "-=2.2");

        /*
        tl.fromTo(headerRef.current,
            { opacity: 0, y: window.innerHeight },
            { opacity: 1, y: 0, duration: 2, ease: "power4.out" }, "-=1.55"
        );
        */
    }, [navigate]);

    return (
        <div ref={mainRef} className="main">
            <div ref={overlayRef} className="overlay"></div>
            <div ref={containerRef} className="container">
                <header className="App-header" ref={headerRef} style={{opacity: 0}}>
                    <h1>Welcome!</h1>
                </header>

                <svg ref={svgRef} width="500" height="79" viewBox="0 0 500 79" fill="none">
                    <rect width="500" height="79" fill="#ffffff00"/>
                    <g id="Frame 1" ref={frameRef}>
                        <g id="STEKKOR" ref={stekkorRef}>
                            <path className="st1"
                                  d="M18.728 35.224C17.2347 35.224 15.8907 34.968 14.696 34.456C13.5013 33.9227 12.5627 33.176 11.88 32.216C11.1973 31.256 10.856 30.136 10.856 28.856H14.76C14.8453 29.816 15.2187 30.6053 15.88 31.224C16.5627 31.8427 17.512 32.152 18.728 32.152C19.9867 32.152 20.968 31.8533 21.672 31.256C22.376 30.6373 22.728 29.848 22.728 28.888C22.728 28.1413 22.504 27.5333 22.056 27.064C21.6293 26.5947 21.0853 26.232 20.424 25.976C19.784 25.72 18.888 25.4427 17.736 25.144C16.2853 24.76 15.1013 24.376 14.184 23.992C13.288 23.5867 12.52 22.968 11.88 22.136C11.24 21.304 10.92 20.1947 10.92 18.808C10.92 17.528 11.24 16.408 11.88 15.448C12.52 14.488 13.416 13.752 14.568 13.24C15.72 12.728 17.0533 12.472 18.568 12.472C20.7227 12.472 22.4827 13.016 23.848 14.104C25.2347 15.1707 26.0027 16.6427 26.152 18.52H22.12C22.056 17.7093 21.672 17.016 20.968 16.44C20.264 15.864 19.336 15.576 18.184 15.576C17.1387 15.576 16.2853 15.8427 15.624 16.376C14.9627 16.9093 14.632 17.6773 14.632 18.68C14.632 19.3627 14.8347 19.928 15.24 20.376C15.6667 20.8027 16.2 21.144 16.84 21.4C17.48 21.656 18.3547 21.9333 19.464 22.232C20.936 22.6373 22.1307 23.0427 23.048 23.448C23.9867 23.8533 24.776 24.4827 25.416 25.336C26.0773 26.168 26.408 27.288 26.408 28.696C26.408 29.8267 26.0987 30.8933 25.48 31.896C24.8827 32.8987 23.9973 33.7093 22.824 34.328C21.672 34.9253 20.3067 35.224 18.728 35.224Z"
                                  fill="black"/>
                            <path className="st1"
                                  d="M53.0805 12.76V15.736H47.1605V35H43.5125V15.736H37.5605V12.76H53.0805Z"
                                  fill="black"/>
                            <path className="st1"
                                  d="M68.423 15.704V22.232H76.103V25.208H68.423V32.024H77.063V35H64.775V12.728H77.063V15.704H68.423Z"
                                  fill="black"/>
                            <path className="st1"
                                  d="M101.812 35L93.2042 25.048V35H89.5562V12.76H93.2042V22.904L101.844 12.76H106.42L96.7562 23.896L106.58 35H101.812Z"
                                  fill="black"/>
                            <path className="st1"
                                  d="M130.062 35L121.454 25.048V35H117.806V12.76H121.454V22.904L130.094 12.76H134.67L125.006 23.896L134.83 35H130.062Z"
                                  fill="black"/>
                            <path className="st1"
                                  d="M156.2 35.224C154.131 35.224 152.222 34.744 150.472 33.784C148.744 32.8027 147.368 31.448 146.344 29.72C145.342 27.9707 144.84 26.008 144.84 23.832C144.84 21.656 145.342 19.704 146.344 17.976C147.368 16.248 148.744 14.904 150.472 13.944C152.222 12.9627 154.131 12.472 156.2 12.472C158.291 12.472 160.2 12.9627 161.928 13.944C163.678 14.904 165.054 16.248 166.056 17.976C167.059 19.704 167.56 21.656 167.56 23.832C167.56 26.008 167.059 27.9707 166.056 29.72C165.054 31.448 163.678 32.8027 161.928 33.784C160.2 34.744 158.291 35.224 156.2 35.224ZM156.2 32.056C157.672 32.056 158.984 31.7253 160.136 31.064C161.288 30.3813 162.184 29.4213 162.824 28.184C163.486 26.9253 163.816 25.4747 163.816 23.832C163.816 22.1893 163.486 20.7493 162.824 19.512C162.184 18.2747 161.288 17.3253 160.136 16.664C158.984 16.0027 157.672 15.672 156.2 15.672C154.728 15.672 153.416 16.0027 152.264 16.664C151.112 17.3253 150.206 18.2747 149.544 19.512C148.904 20.7493 148.584 22.1893 148.584 23.832C148.584 25.4747 148.904 26.9253 149.544 28.184C150.206 29.4213 151.112 30.3813 152.264 31.064C153.416 31.7253 154.728 32.056 156.2 32.056Z"
                                  fill="black"/>
                            <path className="st1"
                                  d="M190.702 35L185.582 26.104H182.798V35H179.15V12.76H186.83C188.537 12.76 189.977 13.0587 191.15 13.656C192.345 14.2533 193.23 15.0533 193.806 16.056C194.403 17.0587 194.702 18.1787 194.702 19.416C194.702 20.8667 194.275 22.1893 193.422 23.384C192.59 24.5573 191.299 25.3573 189.55 25.784L195.054 35H190.702ZM182.798 23.192H186.83C188.195 23.192 189.219 22.8507 189.902 22.168C190.606 21.4853 190.958 20.568 190.958 19.416C190.958 18.264 190.617 17.368 189.934 16.728C189.251 16.0667 188.217 15.736 186.83 15.736H182.798V23.192Z"
                                  fill="black"/>
                        </g>
                        <g id="TRANSPORT" ref={transportRef}>
                            <path className="st1"
                                  d="M266.768 12.76V15.736H260.848V35H257.2V15.736H251.248V12.76H266.768Z"
                                  fill="black"/>
                            <path className="st1"
                                  d="M290.014 35L284.894 26.104H282.11V35H278.462V12.76H286.142C287.849 12.76 289.289 13.0587 290.462 13.656C291.657 14.2533 292.542 15.0533 293.118 16.056C293.716 17.0587 294.014 18.1787 294.014 19.416C294.014 20.8667 293.588 22.1893 292.734 23.384C291.902 24.5573 290.612 25.3573 288.862 25.784L294.366 35H290.014ZM282.11 23.192H286.142C287.508 23.192 288.532 22.8507 289.214 22.168C289.918 21.4853 290.27 20.568 290.27 19.416C290.27 18.264 289.929 17.368 289.246 16.728C288.564 16.0667 287.529 15.736 286.142 15.736H282.11V23.192Z"
                                  fill="black"/>
                            <path className="st1"
                                  d="M320.089 30.456H310.777L309.177 35H305.369L313.337 12.728H317.561L325.529 35H321.689L320.089 30.456ZM319.065 27.48L315.449 17.144L311.801 27.48H319.065Z"
                                  fill="black"/>
                            <path className="st1"
                                  d="M355.266 35H351.618L340.642 18.392V35H336.994V12.728H340.642L351.618 29.304V12.728H355.266V35Z"
                                  fill="black"/>
                            <path className="st1"
                                  d="M375.384 35.224C373.891 35.224 372.547 34.968 371.352 34.456C370.158 33.9227 369.219 33.176 368.536 32.216C367.854 31.256 367.512 30.136 367.512 28.856H371.416C371.502 29.816 371.875 30.6053 372.536 31.224C373.219 31.8427 374.168 32.152 375.384 32.152C376.643 32.152 377.624 31.8533 378.328 31.256C379.032 30.6373 379.384 29.848 379.384 28.888C379.384 28.1413 379.16 27.5333 378.712 27.064C378.286 26.5947 377.742 26.232 377.08 25.976C376.44 25.72 375.544 25.4427 374.392 25.144C372.942 24.76 371.758 24.376 370.84 23.992C369.944 23.5867 369.176 22.968 368.536 22.136C367.896 21.304 367.576 20.1947 367.576 18.808C367.576 17.528 367.896 16.408 368.536 15.448C369.176 14.488 370.072 13.752 371.224 13.24C372.376 12.728 373.71 12.472 375.224 12.472C377.379 12.472 379.139 13.016 380.504 14.104C381.891 15.1707 382.659 16.6427 382.808 18.52H378.776C378.712 17.7093 378.328 17.016 377.624 16.44C376.92 15.864 375.992 15.576 374.84 15.576C373.795 15.576 372.942 15.8427 372.28 16.376C371.619 16.9093 371.288 17.6773 371.288 18.68C371.288 19.3627 371.491 19.928 371.896 20.376C372.323 20.8027 372.856 21.144 373.496 21.4C374.136 21.656 375.011 21.9333 376.12 22.232C377.592 22.6373 378.787 23.0427 379.704 23.448C380.643 23.8533 381.432 24.4827 382.072 25.336C382.734 26.168 383.064 27.288 383.064 28.696C383.064 29.8267 382.755 30.8933 382.136 31.896C381.539 32.8987 380.654 33.7093 379.48 34.328C378.328 34.9253 376.963 35.224 375.384 35.224Z"
                                  fill="black"/>
                            <path className="st1"
                                  d="M410.921 19.384C410.921 20.5147 410.654 21.5813 410.121 22.584C409.587 23.5867 408.734 24.408 407.561 25.048C406.387 25.6667 404.883 25.976 403.049 25.976H399.017V35H395.369V12.76H403.049C404.755 12.76 406.195 13.0587 407.369 13.656C408.563 14.232 409.449 15.0213 410.025 16.024C410.622 17.0267 410.921 18.1467 410.921 19.384ZM403.049 23C404.435 23 405.47 22.6907 406.153 22.072C406.835 21.432 407.177 20.536 407.177 19.384C407.177 16.952 405.801 15.736 403.049 15.736H399.017V23H403.049Z"
                                  fill="black"/>
                            <path className="st1"
                                  d="M432.544 35.224C430.475 35.224 428.565 34.744 426.816 33.784C425.088 32.8027 423.712 31.448 422.688 29.72C421.685 27.9707 421.184 26.008 421.184 23.832C421.184 21.656 421.685 19.704 422.688 17.976C423.712 16.248 425.088 14.904 426.816 13.944C428.565 12.9627 430.475 12.472 432.544 12.472C434.635 12.472 436.544 12.9627 438.272 13.944C440.021 14.904 441.397 16.248 442.4 17.976C443.403 19.704 443.904 21.656 443.904 23.832C443.904 26.008 443.403 27.9707 442.4 29.72C441.397 31.448 440.021 32.8027 438.272 33.784C436.544 34.744 434.635 35.224 432.544 35.224ZM432.544 32.056C434.016 32.056 435.328 31.7253 436.48 31.064C437.632 30.3813 438.528 29.4213 439.168 28.184C439.829 26.9253 440.16 25.4747 440.16 23.832C440.16 22.1893 439.829 20.7493 439.168 19.512C438.528 18.2747 437.632 17.3253 436.48 16.664C435.328 16.0027 434.016 15.672 432.544 15.672C431.072 15.672 429.76 16.0027 428.608 16.664C427.456 17.3253 426.549 18.2747 425.888 19.512C425.248 20.7493 424.928 22.1893 424.928 23.832C424.928 25.4747 425.248 26.9253 425.888 28.184C426.549 29.4213 427.456 30.3813 428.608 31.064C429.76 31.7253 431.072 32.056 432.544 32.056Z"
                                  fill="black"/>
                            <path className="st1"
                                  d="M467.046 35L461.926 26.104H459.142V35H455.494V12.76H463.174C464.88 12.76 466.32 13.0587 467.494 13.656C468.688 14.2533 469.574 15.0533 470.15 16.056C470.747 17.0587 471.046 18.1787 471.046 19.416C471.046 20.8667 470.619 22.1893 469.766 23.384C468.934 24.5573 467.643 25.3573 465.894 25.784L471.398 35H467.046ZM459.142 23.192H463.174C464.539 23.192 465.563 22.8507 466.246 22.168C466.95 21.4853 467.302 20.568 467.302 19.416C467.302 18.264 466.96 17.368 466.278 16.728C465.595 16.0667 464.56 15.736 463.174 15.736H459.142V23.192Z"
                                  fill="black"/>
                            <path className="st1" d="M498.08 12.76V15.736H492.16V35H488.512V15.736H482.56V12.76H498.08Z"
                                  fill="black"/>
                        </g>
                        <path id="Ellipse 1" ref={gRef}
                              d="M231.5 24.5C231.5 27.4418 228.913 30 225.5 30C222.087 30 219.5 27.4418 219.5 24.5C219.5 21.5582 222.087 19 225.5 19C228.913 19 231.5 21.5582 231.5 24.5Z"
                              fill="#ffffff00" stroke="black" stroke-width="3"/>
                        <g id="Vector_17" ref={anchorRef}>
                            <path
                                d="M219.08 35.0321C220 34.6225 221.772 38.2611 224.58 38.6341C225.354 38.737 226.58 38.6341 226.58 38.6341C229.388 38.2611 231.58 34.6225 232.5 35.0321C233.08 35.6225 230.641 40.6377 228.341 44.4705C226.841 46.9705 223 52.5 222.018 54.2886L221.08 56.6341C220.896 59.7926 221.513 61.5504 223.119 62.6678C223.958 63.2352 225.03 63.6428 226.341 63.9705C229.103 64.3069 232.341 63.9705 233.341 63.4705C235.103 62.8069 236.841 60.9705 237.58 55.6341V49.6341C237.841 47.931 239.341 49.9705 240.58 52.1341C242.341 55.9705 243.841 58.4705 242.392 64.6341C242.392 64.6341 242 66 240.5 68C240 68.5 236.5 72.5 228.5 73C219 72.5 213 68.5 212.08 61.1341C211.841 56.6341 212.08 54.7205 213.58 52.0321C215.197 49.1341 220.323 43.9272 220.58 41.5321C221 37.6225 218.5 35.6225 219.08 35.0321Z"
                                fill="black"/>
                            <path
                                d="M222.018 54.2886C223 52.5 226.841 46.9705 228.341 44.4705C230.641 40.6377 233.08 35.6225 232.5 35.0321C231.58 34.6225 229.388 38.2611 226.58 38.6341C226.58 38.6341 225.354 38.737 224.58 38.6341C221.772 38.2611 220 34.6225 219.08 35.0321C218.5 35.6225 221 37.6225 220.58 41.5321C220.323 43.9272 215.197 49.1341 213.58 52.0321C212.08 54.7205 211.841 56.6341 212.08 61.1341C213 68.5 219 72.5 228.5 73C236.5 72.5 240 68.5 240.5 68C242 66 242.392 64.6341 242.392 64.6341C243.841 58.4705 242.341 55.9705 240.58 52.1341C239.341 49.9705 237.841 47.931 237.58 49.6341V55.6341C236.841 60.9705 235.103 62.8069 233.341 63.4705C232.341 63.9705 229.103 64.3069 226.341 63.9705M222.018 54.2886L222.08 54.1341M222.018 54.2886L221.08 56.6341C220.896 59.7926 221.513 61.5504 223.119 62.6678M223.119 62.6678C223.932 63.2332 224.997 63.6346 226.341 63.9705M223.119 62.6678C223.958 63.2352 225.03 63.6428 226.341 63.9705"
                                stroke="black"/>
                        </g>
                    </g>
                </svg>
            </div>
        </div>
    );
}

export default Transition;
